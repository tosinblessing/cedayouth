webpackJsonp([27],{CklA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=s("GiK3"),n=s.n(a),o=s("xhD6"),i=s("Rjr+"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},l=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,s,a){var n=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={}),t&&n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);else t||(t=n||{});if(1===o)t.children=a;else if(o>1){for(var c=Array(o),l=0;l<o;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===s?null:""+s,ref:null,props:t,_owner:null}}),u=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,s,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n))),r.state={isProcessing:!1,message:"Add to Home Feed",isProcessingSpam:!1,spamMessage:"Mark as Spam",isProcessingCacheClear:!1,cacheClearMessage:"Clear Cache"},r.addToHomeFeed=function(e){e.preventDefault(),r.setState({isProcessing:!0}),o.a.post("/api/feed/"+r.props.type+"/"+r.props.id).then(function(e){var t=e.data;return r.setState({isProcessing:!1,message:t.message})}).catch(function(e){return r.setState({isProcessing:!1,message:"Failed"})})},r.markAsSpam=function(e){e.preventDefault(),r.setState({isProcessingSpam:!0}),o.a.put("/api/posts/"+r.props.id+"/spam").then(function(e){var t=e.data;return r.setState({isProcessingSpam:!1,spamMessage:t.message})}).catch(function(e){return r.setState({isProcessingSpam:!1,spamMessage:"Failed"})})},r.clearCache=function(e){e.preventDefault(),o.a.post("/api/clear/"+r.props.type+"/"+r.props.id).then(function(e){var t=e.data;return r.setState({isProcessingCacheClear:!1,cacheClearMessage:t.message})}).catch(function(e){return r.setState({isProcessingCacheClear:!1,cacheClearMessage:"Failed"})})},p(r,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["PureComponent"]),u(t,[{key:"render",value:function(){var e=this.state,t=e.isProcessing,s=e.isProcessingSpam,r=e.message,a=e.spamMessage,n=e.isProcessingCacheClear,o=e.cacheClearMessage,i=this.props,c=i.user,u=i.authorId,p=i.isPreview,f=i.isCommunity,d=i.type,m=(i.id,i.editUrl),h=c&&"god"===c.role,g=c&&c.id==u;return l("div",{className:"article-tools",style:{position:"fixed",left:"30px",bottom:"30px",zIndex:"9999"}},void 0,(g||h)&&l("a",{href:m,className:"button is-small is-rounded is-info m-r-xs"},void 0,"Edit"),h&&!p&&"post"===d&&l("a",{className:"button is-small is-rounded is-info m-r-xs",onClick:this.addToHomeFeed},void 0,t?"Adding...":r),h&&!p&&l("a",{className:"button is-small is-rounded is-info m-r-xs",onClick:this.clearCache},void 0,n?"Adding...":o),h&&f&&"post"===d&&l("a",{className:"button is-small is-rounded is-info",onClick:this.markAsSpam},void 0,s?"Marking...":a))}}]),t}();t.default=function(e){return l(i.a.Consumer,{},void 0,function(t){var s=t.user;return n.a.createElement(f,c({user:s},e))})}}});